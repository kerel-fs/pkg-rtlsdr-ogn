From 2d5ae0932b8421d0b9cbd1d61bcc93cce7536aae Mon Sep 17 00:00:00 2001
From: "Fabian P. Schmidt" <kerel-fs@gmx.de>
Date: Thu, 16 Feb 2017 09:38:26 +0100
Subject: [PATCH] Add systemd units for ogn-decode and ogn-rf

---
 scripts/ogn-decode.service | 11 +++++++++++
 scripts/ogn-decode.socket  |  6 ++++++
 scripts/ogn-rf.service     | 11 +++++++++++
 3 files changed, 28 insertions(+)
 create mode 100644 scripts/ogn-decode.service
 create mode 100644 scripts/ogn-decode.socket
 create mode 100644 scripts/ogn-rf.service

--- /dev/null
+++ b/scripts/ogn-decode.service
@@ -0,0 +1,13 @@
+[Unit]
+Description=Decode ogn/flarm data given by a fifo and forward it to glidernet.org
+After=network.target time-sync.target
+
+[Service]
+StandardInput=tty
+StandardOutput=journal
+User=ogn
+ExecStart=/usr/bin/ogn-decode /etc/rtlsdr-ogn.conf
+Restart=on-failure
+
+[Install]
+WantedBy=multi-user.target
--- /dev/null
+++ b/scripts/ogn-decode.socket
@@ -0,0 +1,6 @@
+[Socket]
+ListenFIFO=/var/run/ogn-decode.fifo
+SocketUser=ogn
+
+[Install]
+WantedBy=sockets.target
--- /dev/null
+++ b/scripts/ogn-rf.service
@@ -0,0 +1,11 @@
+[Unit]
+Description=Receive ogn/flarm data and write the raw data to a fifo
+After=network.target time-sync.target
+
+[Service]
+User=ogn
+ExecStart=/usr/bin/ogn-rf /etc/rtlsdr-ogn.conf
+Restart=on-failure
+
+[Install]
+WantedBy=multi-user.target
